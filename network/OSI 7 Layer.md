# OSI 7 Layer

### 0. 개요

* OSI 이란?

  > OSI 모형(Open Systems Interconnection Reference Model)은 국제표준화기구(ISO)에서 개발한 모델로, 컴퓨터 네트워크 프로토콜 디자인과 통신을 계층으로 나누어 설명한 것이다. 일반적으로 OSI 7 계층이라 불리기도 한다.
  >
  > 나무위키, osi 모형
  >
  >  (https://namu.wiki/w/OSI%20%EB%AA%A8%ED%98%95?from=OSI)

* 왜 쓰는가?

  1) 단순함

  - 설계가 용이하고 유지가 간편하다

  2) 유연함

  * 각각의 계층이 분리되어 있어 수정이 유연함



### 1. 물리 계층

* 직접적인 매체(cable) 접속 및 bit(0,1)형식 데이터를 관리

* 디지털 신호와 아날로그 신호를 다룸.

* 디지털 전송에는 **낮은 대역 통과 채널**이 필요함 디지털 신호는 0부터 무한대까지의 대역폭을 가지기 때문임

* 반면 아날로그 신호는 주파수 f1에서 f2 로 디지털 신호보다 좁은 대역폭을 가지므로, **띠 대역 통과 채널**이 적합함. 

  (낮은 대역 통과 채널도 물론 쓸 수 있겠지만, 띠 대역 통과 채널이 더 구하기 쉬움)

* 전파 상황과 매체의 대역폭에 따라 아나로그 신호, 디지털 신호 적절히 써야 함

  따라서 통신에는 적절한 변환 기법들이 쓰임

  * **라인 코딩** : 바이너리 데이터를 디지털 신호로 바꾸는 과정

    인코더와 디코더에 쓰임
    ![1L_1](https://user-images.githubusercontent.com/46865281/71701288-ff3e1c80-2e0b-11ea-9017-0278f5686a6f.png)
    
* **PCM**: 아날로그 신호 -> 디지털 신호 -> 바이너리 데이터로 저장하는 과정, PAM으로 표본을 채집(샘플링)하고 정량화(Quantization)로 값을 매기고 바이너리 값으로 바꾼 다음에 라인 코딩한다.
  ![1L_2](https://user-images.githubusercontent.com/46865281/71701295-036a3a00-2e0c-11ea-9648-bf4d29c490de.png)
  

  
* **QAM**: 아날로그 신호의 진폭과 위상을 이용해서 디지털 신호로 변환하는 방법
  
  모듈레이터, 디모듈레이터에 쓰임 (둘을 합친게 모뎀)
  
![1L_3](https://user-images.githubusercontent.com/46865281/71701301-06652a80-2e0c-11ea-9de7-56abc30d5088.png)
  

  
* 대표 장치는 **허브**다. 허브는 받은 신호를 그대로 보낸다. 



### 2. 데이터 링크 계층

* 1계층의 bit를 frame 으로 만들어서 보낸다.
* 2계층 장비 **스위치**에서 물리 주소(NIC에 있는 mac 주소)를 체크하며 hop to hop 으로 이동한다.

* 4 계층과 함께 데이터 전송 신뢰성(흐름, 오류 제어)을 책임진다.
  * **흐름 제어** 란 수신기로부터 확인 응답을 받기 전 얼마나 많은 데이터가 전송될 수 있을지 확인하는 절차임. 수신 장치의 처리량은 하계가 있으므로 데이터의 흐름이 수신기를 압도하지 않도록
  * **오류 제어** 에는 오류 검출과 오류 정정이 있음
    1. **오류 검출** 은 수신자가 자동으로 오류를 정정하는 절차임. 오류를 찾는 기법으로 주로 중복(redundancy)를 활용함. 여분의 정보를 추가함으로써 오류에 대한 정보 제공함. CRC, CheckSum(헤더 주소), 헤밍(단방향) 등의 방법 있음.
    2. **오류 제어** 는 오류가 발생한 것을 송신자가 확인하고 재전송하는 절차임(흐름 제어와 섞여 있는 개념임). ARQ(automatic repeat request) 기법들이 쓰이는데 핵심은 수신자에게 프레임을 보내고 Ack를 받았는지 여부에 따라 윈도우를 이동하는 것.
* 다중 접속 프로토콜
  * 다수의 시스템이 매체를 공유할 때 충돌 없이 데이터를 전송하는 절차
    1. **랜덤 접속 프로토콜** 은 채널을 분할하지 않는다. 따라서 충돌이 발생할 것이고, 이를 해결하려고 한다. 대표적으로 유선에서 **CSMA/CD** , 무선에서 **CSMA/CA** 가 쓰인다. 
       * **CSMA/CD** 는 충돌이 발생했을 때 신호 변화(증폭, 감쇄)를 감지해서 일정 시간 기다린 뒤 다시 보내는 절차(Collision Detection) 
       * **CSMA/CA** 는 회선이 idle인지 확인하고 랜덤한 시간 동안 기다린 후(다른 지국과 충돌할 수 있기 때문) Ack를 보내서 충돌을 회피하려고 함(Collision Avoidance)
    2. **채널화** 는 링크를 여러 채널로 나누어 사용하는 방식. FDMA(Frequency로 나눔), TDMA(Time으로 나눔)이 있는데 현재 CDMA(Code로 나눔)가 메인임.
       * **CDMA** 는 주파수를 나누지 않으며 동시에 사용함. 사용자에게 코드가 할당되고 각 사용자의 데이터는 암호화 되서 전송됨.